

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Transformer &mdash; pandapower 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="pandapower 1.0 documentation" href="../../../index.html"/>
        <link rel="up" title="Datastructure and Elements" href="../../elements.html"/>
        <link rel="next" title="Three Winding Transformer" href="../trafo3w/trafo3w.html"/>
        <link rel="prev" title="External Grid" href="../ext_grid/ext_grid.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> pandapower
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About pandapower</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../elements.html">Datastructure and Elements</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bus/bus.html">Bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../line/line.html">Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../switch/switch.html">Switch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../load/load.html">Load</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sgen/sgen.html">Static Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ext_grid/ext_grid.html">External Grid</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Transformer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trafo3w/trafo3w.html">Three Winding Transformer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gen/gen.html">Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shunt/shunt.html">Shunt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../impedance/impedance.html">Impedance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ward/ward.html">Ward</a></li>
<li class="toctree-l2"><a class="reference internal" href="../xward/xward.html">Extended Ward</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../loadflow.html">Power Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../topology.html">Topological Searches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networks.html">Generic Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plotting.html">Plotting Networks</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">pandapower</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../elements.html">Datastructure and Elements</a> &raquo;</li>
      
    <li>Transformer</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/pandapower/elements/trafo/trafo.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="transformer">
<span id="trafo"></span><h1>Transformer<a class="headerlink" href="#transformer" title="Permalink to this headline">Â¶</a></h1>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../../api_create.html#create-trafo"><span class="std std-ref">Create Trafo</span></a></p>
</div>
<p><strong>Parameters</strong></p>
<p><em>net.trafo</em></p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="11%" />
<col width="28%" />
<col width="44%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Parameter</strong></td>
<td><strong>Datatype</strong></td>
<td><strong>Value Range</strong></td>
<td><strong>Explanation</strong></td>
</tr>
<tr class="row-even"><td>name</td>
<td>string</td>
<td>&nbsp;</td>
<td>name of the transformer</td>
</tr>
<tr class="row-odd"><td>std_type</td>
<td>string</td>
<td>&nbsp;</td>
<td>transformer standard type name</td>
</tr>
<tr class="row-even"><td>hv_bus*</td>
<td>integer</td>
<td>&nbsp;</td>
<td>high voltage bus index of the transformer</td>
</tr>
<tr class="row-odd"><td>lv_bus*</td>
<td>integer</td>
<td>&nbsp;</td>
<td>low voltage bus index of the transformer</td>
</tr>
<tr class="row-even"><td>sn_kva*</td>
<td>float</td>
<td><span class="math">\(&gt;\)</span> 0</td>
<td>rated apparent power of the transformer [kVA]</td>
</tr>
<tr class="row-odd"><td>vn_hv_kv*</td>
<td>float</td>
<td><span class="math">\(&gt;\)</span> 0</td>
<td>rated voltage at high voltage bus [kV]</td>
</tr>
<tr class="row-even"><td>vn_lv_kv*</td>
<td>float</td>
<td><span class="math">\(&gt;\)</span> 0</td>
<td>rated voltage at low voltage bus [kV]</td>
</tr>
<tr class="row-odd"><td>vsc_percent*</td>
<td>float</td>
<td><span class="math">\(&gt;\)</span> 0</td>
<td>short circuit voltage [%]</td>
</tr>
<tr class="row-even"><td>vscr_percent*</td>
<td>float</td>
<td><span class="math">\(\geq\)</span>  0</td>
<td>real component of
short circuit voltage [%]</td>
</tr>
<tr class="row-odd"><td>pfe_kw*</td>
<td>float</td>
<td><span class="math">\(\geq\)</span> 0</td>
<td>iron losses [kW]</td>
</tr>
<tr class="row-even"><td>i0_percent*</td>
<td>float</td>
<td><span class="math">\(\geq\)</span> 0</td>
<td>open loop losses in [%]</td>
</tr>
<tr class="row-odd"><td>shift_degree*</td>
<td>float</td>
<td>&nbsp;</td>
<td>transformer phase shift angle</td>
</tr>
<tr class="row-even"><td>tp_side</td>
<td>string</td>
<td>&#8220;hv&#8221;, &#8220;lv&#8221;</td>
<td>defines if tap changer is at the high- or low voltage side</td>
</tr>
<tr class="row-odd"><td>tp_mid</td>
<td>integer</td>
<td>&nbsp;</td>
<td>rated tap position</td>
</tr>
<tr class="row-even"><td>tp_min</td>
<td>integer</td>
<td>&nbsp;</td>
<td>minimum tap position</td>
</tr>
<tr class="row-odd"><td>tp_max</td>
<td>integer</td>
<td>&nbsp;</td>
<td>maximum tap position</td>
</tr>
<tr class="row-even"><td>tp_st_percent</td>
<td>float</td>
<td><span class="math">\(&gt;\)</span> 0</td>
<td>tap step size [%]</td>
</tr>
<tr class="row-odd"><td>tp_pos</td>
<td>integer</td>
<td>&nbsp;</td>
<td>current position of tap changer</td>
</tr>
<tr class="row-even"><td>in_service*</td>
<td>boolean</td>
<td><div class="first last line-block">
<div class="line"><em>&#8220;True&#8221;</em> - in service</div>
<div class="line"><em>&#8220;False&#8221;</em> - out of service</div>
</div>
</td>
<td>specifies if the transformer is in service. Only in service elements are considered during loadflow calculation</td>
</tr>
</tbody>
</table>
<p><a href="#id1"><span class="problematic" id="id2">*</span></a>necessary for executing a loadflow calculation.</p>
<p><strong>Loadflow Model</strong></p>
<p>The equivalent circuit used for the transformer can be set in the loadflow with the parameter &#8220;trafo_model&#8221;.</p>
<p><em>trafo_model=&#8217;t&#8217;:</em></p>
<a class="reference internal image-reference" href="../../../_images/t.png"><img alt="../../../_images/t.png" class="align-center" src="../../../_images/t.png" style="width: 30em;" /></a>
<p><em>trafo_model=&#8217;pi&#8217;:</em></p>
<a class="reference internal image-reference" href="../../../_images/pi.png"><img alt="../../../_images/pi.png" class="align-center" src="../../../_images/pi.png" style="width: 30em;" /></a>
<p><em>Transformer Ratio:</em></p>
<p>The magnitude of the transformer ratio is given as:</p>
<div class="math">
\begin{align*}
n &amp;= \frac{V_{ref, HV, transformer}}{V_{ref, LV, transformer}} \cdot \frac{V_{ref, LV bus}}{V_{ref, HV bus}}
\end{align*}</div><p>The reference voltages of the high- and low voltage buses are taken from the net.bus table.
If no tap changer is defined, the reference voltage of the transformer  is taken directly from the transformer table:</p>
<div class="math">
\begin{align*}
 V_{ref, HV, transformer} &amp;= vn\_hv\_kv \\
 V_{ref, LV, transformer} &amp;= vn\_lv\_kv
\end{align*}</div><p>If a tap changer is defined, the reference voltage is multiplied with the tap factor:</p>
<div class="math">
\begin{align*}
 n_{tap} = 1 + (tp\_pos - tp\_mid) \cdot \frac{tp\_st\_percent}{100}
 \end{align*}</div><p>On which side the reference voltage is adapted depends on the <span class="math">\(tp\_side\)</span> variable:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="30%" />
<col width="30%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&nbsp;</td>
<td><strong>tp_side=&#8221;hv&#8221;</strong></td>
<td><strong>tp_side=&#8221;lv&#8221;</strong></td>
</tr>
<tr class="row-even"><td><span class="math">\(V_{n, HV, transformer}\)</span></td>
<td><span class="math">\(vnh\_kv  \cdot n_{tap}\)</span></td>
<td><span class="math">\(vnh\_kv\)</span></td>
</tr>
<tr class="row-odd"><td><span class="math">\(V_{n, LV, transformer}\)</span></td>
<td><span class="math">\(vnl\_kv\)</span></td>
<td><span class="math">\(vnl\_kv  \cdot n_{tap}\)</span></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The variables tp_min and tp_max are not considered in the loadflow. The user is responsible to ensure that tp_min &lt; tp_mid &lt; tp_max!</p>
</div>
<p><em>Phase Shift:</em></p>
<p>If the loadflow is run with voltage_angles=True, the complex ratio is given as:</p>
<div class="math">
\begin{align*}
\underline{n} &amp;= n \cdot e^{j \cdot \theta} \\
\theta &amp;= shift\_degree \cdot \frac{\pi}{180}
\end{align*}</div><p>Otherwise, the ratio does not include a phase shift:</p>
<div class="math">
\begin{align*}
\underline{n} &amp;= n
\end{align*}</div><p><em>Impedances:</em></p>
<p>The short-circuit impedance is calculated as:</p>
<div class="math">
\begin{align*}
z_k &amp;= \frac{vsc\_percent}{100} \cdot \frac{1000}{sn\_kva} \\
r_k &amp;= \frac{vscr\_percent}{100} \cdot \frac{1000}{sn\_kva} \\
x_k &amp;= \sqrt{z^2 - r^2} \\
\underline{z}_k &amp;= r_k + j \cdot x_k
\end{align*}</div><p>The magnetising admittance is calculated as:</p>
<div class="math">
\begin{align*}
y_m &amp;= \frac{i0\_percent}{100} \\
g_m &amp;= \frac{pfe\_kw}{sn\_kva \cdot 1000} \cdot \frac{1000}{sn\_kva} \\
b_m &amp;= \sqrt{y_m^2 - g_m^2} \\
\underline{y_m} &amp;= g_m + j \cdot b_m
\end{align*}</div><p>The values calculated in that way are relative to the rated values of the transformer. To transform them into the per unit system, they have to be converted to the rated values of the network:</p>
<div class="math">
\begin{align*}
 Z_{N} &amp;= \frac{V_{N}^2}{S_{N}} \\
 Z_{ref, trafo} &amp;= \frac{vn\_lv\_kv^2 \cdot 1000}{sn\_kva} \\
 \underline{z} &amp;= \underline{z}_k \cdot \frac{Z_{ref, trafo}}{Z_{N}} \\
 \underline{y} &amp;= \underline{y}_m \cdot \frac{Z_{N}}{Z_{ref, trafo}} \\
 \end{align*}</div><p>Where <span class="math">\(S_{N} = 1 \ MVA\)</span> (see <a class="reference internal" href="../../about_units.html#conventions"><span class="std std-ref">per unit system</span></a>) and <span class="math">\(V_{N}\)</span> is the nominal bus voltage at the low voltage side of the transformer.</p>
<p><strong>Results</strong></p>
<p><em>net.res_trafo</em></p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="13%" />
<col width="69%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Parameter</strong></td>
<td><strong>Datatype</strong></td>
<td><strong>Explanation</strong></td>
</tr>
<tr class="row-even"><td>p_hv_kw</td>
<td>float</td>
<td>active power flow at the high voltage transformer bus [kW]</td>
</tr>
<tr class="row-odd"><td>q_hv_kvar</td>
<td>float</td>
<td>reactive power flow at the high voltage transformer bus [kVar]</td>
</tr>
<tr class="row-even"><td>p_lv_kw</td>
<td>float</td>
<td>active power flow at the low voltage transformer bus [kW]</td>
</tr>
<tr class="row-odd"><td>q_lv_kvar</td>
<td>float</td>
<td>reactive power flow at the low voltage transformer bus [kVar]</td>
</tr>
<tr class="row-even"><td>pl_kw</td>
<td>float</td>
<td>active power losses of the transformer [kW]</td>
</tr>
<tr class="row-odd"><td>ql_kvar</td>
<td>float</td>
<td>reactive power consumption of the transformer [kvar]</td>
</tr>
<tr class="row-even"><td>i_hv_ka</td>
<td>float</td>
<td>current at the high voltage side of the transformer [kA]</td>
</tr>
<tr class="row-odd"><td>i_lv_ka</td>
<td>float</td>
<td>current at the low voltage side of the transformer [kA]</td>
</tr>
<tr class="row-even"><td>loading_percent</td>
<td>float</td>
<td>load utilization relative to rated power [%]</td>
</tr>
</tbody>
</table>
<div class="math">
\begin{align*}
 p\_hv\_kw &amp;= Re(\underline{v}_{hv} \cdot \underline{i}_{hv}) \\
 q\_hv\_kvar &amp;= Im(\underline{v}_{hv} \cdot \underline{i}_{hv}) \\
 p\_lv\_kw &amp;= Re(\underline{v}_{lv} \cdot \underline{i}_{lv}) \\
 q\_lv\_kvar &amp;= Im(\underline{v}_{lv} \cdot \underline{i}_{lv}) \\
     pl\_kw &amp;= p\_hv\_kw + p\_lv\_kw \\
     ql\_kvar &amp;= q\_hv\_kvar + q\_lv\_kvar \\
 i\_hv\_ka &amp;= i_{hv} \\
 i\_lv\_ka &amp;= i_{lv}
 \end{align*}</div><p>The definition of the transformer loading depends on the trafo_loading parameter of the loadflow.</p>
<p>For trafo_loading=&#8221;current&#8221;, the loading is calculated as:</p>
<div class="math">
\begin{align*}
 loading\_percent &amp;= max(\frac{i_{hv} \cdot vn\_hv\_kv}{sn\_kva}, \frac{i_{lv} \cdot vn\_lv\_kv}{sn\_kva})  \cdot 100
\end{align*}</div><p>For trafo_loading=&#8221;power&#8221;, the loading is defined as:</p>
<div class="math">
\begin{align*}
 loading\_percent &amp;= max( \frac{i_{hv} \cdot v_{hv}}{sn\_kva}, \frac{i_{lv} \cdot v_{lv}}{sn\_kva}) \cdot 100
 \end{align*}</div></div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../trafo3w/trafo3w.html" class="btn btn-neutral float-right" title="Three Winding Transformer" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../ext_grid/ext_grid.html" class="btn btn-neutral" title="External Grid" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 by Fraunhofer IWES and Kassel University.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>