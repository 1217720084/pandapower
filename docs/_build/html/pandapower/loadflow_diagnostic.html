<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Diagnostic Function &mdash; pandapower 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="pandapower 0.1.0 documentation" href="../index.html" />
    <link rel="up" title="Powerflow" href="nc_loadflow.html" />
    <link rel="next" title="Optimal Power Flow" href="nc_opf.html" />
    <link rel="prev" title="Known Problems and Caveats" href="loadflow_caveats.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="nc_opf.html" title="Optimal Power Flow"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="loadflow_caveats.html" title="Known Problems and Caveats"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pandapower 0.1.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="nc.html" >pandapower Network Analysis</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="nc_loadflow.html" accesskey="U">Powerflow</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="diagnostic-function">
<h1>Diagnostic Function<a class="headerlink" href="#diagnostic-function" title="Permalink to this headline">¶</a></h1>
<p>A power flow calculation on a pandapower network can fail to converge for a vast variety of reasons, which often makes debugging difficult, annoying and time consuming.
To help with that, the diagnostic function automatically checks pandapower networks for the most common issues leading to errors. It provides logging output and diagnoses with a controllable
level of detail.</p>
<dl class="function">
<dt id="pandapower.diagnostic">
<code class="descclassname">pandapower.</code><code class="descname">diagnostic</code><span class="sig-paren">(</span><em>net</em>, <em>report_style='detailed'</em>, <em>warnings_only=False</em>, <em>return_result_dict=True</em>, <em>overload_scaling_factor=0.001</em>, <em>lines_min_length_km=0</em>, <em>lines_min_z_ohm=0</em>, <em>nom_voltage_tolerance=0.3</em><span class="sig-paren">)</span><a class="headerlink" href="#pandapower.diagnostic" title="Permalink to this definition">¶</a></dt>
<dd><p>Tool for diagnosis of pandapower networks. Identifies possible reasons for non converging loadflows.</p>
<dl class="docutils">
<dt>INPUT:</dt>
<dd><strong>net</strong> (PandapowerNet) : pandapower network</dd>
<dt>OPTIONAL:</dt>
<dd><ul class="first simple">
<li><strong>report_style</strong> (string, &#8216;detailed&#8217;) : style of the report, that gets ouput in the console</li>
</ul>
<blockquote>
<div><p>&#8216;detailled&#8217;: full report with high level of additional descriptions</p>
<p>&#8216;compact&#8217;  : more compact report, containing essential information only</p>
<p>&#8216;None&#8217;     : no report</p>
</div></blockquote>
<ul class="simple">
<li><strong>warnings_only</strong> (boolean, False): Filters logging output for warnings</li>
</ul>
<blockquote>
<div><p>True: logging output for errors only</p>
<p>False: logging output for all checks, regardless if errors were found or not</p>
</div></blockquote>
<ul class="simple">
<li><strong>return_result_dict</strong> (boolean, True): returns a dictionary containing all check results</li>
</ul>
<blockquote>
<div><p>True: returns dict with all check results</p>
<p>False: no result dict</p>
</div></blockquote>
<ul class="last simple">
<li><strong>overload_scaling_factor</strong> (float, 0.001): downscaling factor for loads and generation      for overload check</li>
<li><strong>lines_min_length_km</strong> (float, 0): minimum length_km allowed for lines</li>
<li><strong>lines_min_z_ohm</strong> (float, 0): minimum z_ohm allowed for lines</li>
<li><strong>nom_voltage_tolerance</strong> (float, 0.3): highest allowed relative deviation between nominal      voltages and bus voltages</li>
</ul>
</dd>
<dt>RETURN:</dt>
<dd><ul class="first simple">
<li><strong>diag_results</strong> (dict): dict that contains the indeces of all elements where errors were found</li>
</ul>
<blockquote class="last">
<div>Format: {&#8216;check_name&#8217;: check_results}</div></blockquote>
</dd>
</dl>
<p>EXAMPLE:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">misc</span><span class="o">.</span><span class="n">diagnostic</span><span class="p">(</span><span class="n">net</span><span class="p">,</span> <span class="n">report_style</span><span class="o">=</span><span class="s1">&#39;compact&#39;</span><span class="p">,</span> <span class="n">warnings_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<p>Usage ist very simple: Just call the function and pass the net you want to diagnose as an argument. Optionally you can specify if you want detailed logging output or summaries only and if the diagnostic should
log all checks performed vs. errors only.</p>
<div class="section" id="check-functions">
<h2>Check functions<a class="headerlink" href="#check-functions" title="Permalink to this headline">¶</a></h2>
<p>The diagnostic function includes the following checks:</p>
<ul class="simple">
<li>invalid values (e.g. negative element indeces)</li>
<li>check, if at least one external grid exists</li>
<li>check, if there are busses with more than one gen and/or ext_grid</li>
<li>overload: tries to run a loadflow calculation with loads scaled down to 10%</li>
<li>switch_configuration: tries to run a loadflow calculation with all switches closed</li>
<li>inconsistent voltages: checks, if there are lines or switches that connect different voltage levels</li>
<li>lines with impedance zero</li>
<li>closed switches between in_service and out_of_service busses</li>
<li>components whose nominal voltages differ from the nominal voltages of the busses they&#8217;re connected to</li>
<li>elements, that are disconnected from the network</li>
<li>usage of wrong reference system for power values of loads and gens</li>
</ul>
<p><strong>Logging output</strong></p>
<p>Here are a few examples of what logging output looks like:</p>
<p><strong>detailed_report = True/False</strong></p>
<p>Both reports show the same result, but on the left hand picture with detailed information, on the right hand picture summary only.</p>
<a class="reference internal image-reference" href="../_images/diag_detailed_report.png"><img alt="alternate Text" class="align-center" src="../_images/diag_detailed_report.png" style="width: 42em;" /></a>
<p><em>warnings_only = True/False</em></p>
<a class="reference internal image-reference" href="../_images/diag_warnings_only.png"><img alt="alternate Text" class="align-center" src="../_images/diag_warnings_only.png" style="width: 42em;" /></a>
<p><strong>Result dict</strong></p>
<p>Aditionally all check results are returned in a dict to allow simple access to the indeces of all element where
errors were found.</p>
<a class="reference internal image-reference" href="../_images/diag_results_dict.png"><img alt="alternate Text" class="align-center" src="../_images/diag_results_dict.png" style="width: 42em;" /></a>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Diagnostic Function</a><ul>
<li><a class="reference internal" href="#check-functions">Check functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="loadflow_caveats.html"
                        title="previous chapter">Known Problems and Caveats</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="nc_opf.html"
                        title="next chapter">Optimal Power Flow</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/pandapower/loadflow_diagnostic.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="nc_opf.html" title="Optimal Power Flow"
             >next</a> |</li>
        <li class="right" >
          <a href="loadflow_caveats.html" title="Known Problems and Caveats"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pandapower 0.1.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="nc.html" >pandapower Network Analysis</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="nc_loadflow.html" >Powerflow</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Alexander Scheidler, Leon Thurner.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>